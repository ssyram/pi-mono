# Pi-Mono 辩论系统 - 长期记忆

## 当前任务
构建 `debate/` 辩论脚本系统，用于组织多模型对抗辩论。

## 任务来源
用户在 `reports/reports/comparison-and-decisions.md` 中添加了批注（`> **批注**`），
针对五场辩论的结论提出了疑问和补充观点，需要通过新一轮辩论来回应。

## 批注摘要
1. **3.1 丞相上下文管理** — 3 条批注:
   - 是否可以用自总结 Hook 强制丞相停止时更新锚点账本？
   - 锚点清除时过程性上下文如何处理？手下汇报如何反馈保留？（3种方案讨论）
   - 增量筛选是否导致 O(n²)？全局账本 + 每次强行更新是否造成精度问题？
2. **3.1 评审裁决后** — 1 条批注:
   - 结合上面批注展开新议题辩论，要求简短易懂例子，批注不一定对要指出问题

## 辩论机制（参照已有辩论）
- 三方对抗 + 独立评审（4 模型）
- Round 1: 初始立场 → Round 2: 反驳修正 → Round 3: 评审裁决
- 基于真实平台技术文档，非空谈

## 辩论脚本设计
- 位置: `debate/`
- 语言: TypeScript (npx tsx)
- 架构: **树状递归辩论** — 分歧驱动递归，合意即收敛
- 单轮: 并行立场 → 并行反驳 → 裁判 triage (合意/分歧拆分)
- 终止: 无分歧收敛 | 达 --max-rounds 强制裁决
- 回退: gemini-3.1-pro-preview 不稳定时议题级回退到 sonnet
- 零依赖: 只用 fetch，OpenAI 兼容 API

## 进度
- [x] 创建长期记忆
- [ ] 设计辩论架构文档
- [ ] 用户审核架构
- [ ] 实现辩论脚本
- [ ] 提取批注 → 组织议题
- [ ] 执行辩论
- [ ] 汇总更新 comparison-and-decisions.md
